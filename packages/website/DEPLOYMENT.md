# ç½‘ç«™è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸å‘å¸ƒæµç¨‹

## æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç½‘ç«™è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š

1. **Preview é˜¶æ®µ**ï¼šåœ¨å¼€å‘åˆ†æ”¯ä¸Šè‡ªåŠ¨éƒ¨ç½²é¢„è§ˆç‰ˆæœ¬
2. **Production é˜¶æ®µ**ï¼šåˆå¹¶åè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

## æµç¨‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¿®æ”¹ packages/website/** å¹¶æ¨é€åˆ° main åˆ†æ”¯                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ website-preview-deploy.yml  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚
         â–¼                     â–¼
    éƒ¨ç½²åˆ° Vercel        åˆ†æ Git æ—¥å¿—
     Preview          è®¡ç®—æ–°ç‰ˆæœ¬å·
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚          â”‚
         â–¼          â–¼
    åˆ›å»º/æ›´æ–°     æäº¤ç‰ˆæœ¬æ›´æ–°
     Release PR   åˆ° website-release
         â”‚             åˆ†æ”¯
         â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ PR ç­‰å¾…äººå·¥å®¡æ ¸      â”‚
      â”‚ æ£€æŸ¥é¢„è§ˆæ•ˆæœ        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ åˆå¹¶ PR åˆ° main â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ website-release-deploy.yml     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â–¼                 â–¼
éƒ¨ç½²åˆ° Vercel    åˆ›å»º GitHub
Production      Release Tag

    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    ğŸš€ ç½‘ç«™ä¸Šçº¿
```

## é…ç½®è¦æ±‚

### GitHub Secrets
åœ¨ä»“åº“ Settings â†’ Secrets ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `VERCEL_TOKEN`ï¼šVercel API ä»¤ç‰Œ
- `VERCEL_ORG_ID`ï¼šVercel ç»„ç»‡ ID
- `VERCEL_PROJECT_ID`ï¼šVercel é¡¹ç›® ID

### åˆ†æ”¯ä¿æŠ¤è§„åˆ™
å»ºè®®ä¸º `website-release` åˆ†æ”¯é…ç½®ï¼š
- è¦æ±‚ Pull Request å®¡æŸ¥
- è¦æ±‚ status checks é€šè¿‡

## å·¥ä½œæµè¯¦è§£

### 1. Preview éƒ¨ç½²å·¥ä½œæµ (`website-preview-deploy.yml`)

**è§¦å‘æ¡ä»¶**ï¼š
- `main` åˆ†æ”¯ä¸Š `packages/website/**` ç›®å½•æœ‰å˜åŒ–
- æˆ–æ‰‹åŠ¨è§¦å‘ (`workflow_dispatch`)

**æ‰§è¡Œæ­¥éª¤**ï¼š

#### A. éƒ¨ç½²åˆ° Vercel Preview
```bash
# 1. æ£€å‡ºä»£ç å¹¶å®‰è£…ä¾èµ–
# 2. æ„å»ºé¡¹ç›®
pnpm build  # åœ¨ packages/website

# 3. éƒ¨ç½²åˆ° Vercel preview ç¯å¢ƒ
vercel deploy --prebuilt --token=$VERCEL_TOKEN
```

#### B. æ™ºèƒ½ç‰ˆæœ¬å·è®¡ç®—
æ ¹æ®è‡ªä¸Šä¸€ä¸ªå‘å¸ƒä»¥æ¥çš„æäº¤ç±»å‹è‡ªåŠ¨é€’å¢ç‰ˆæœ¬ï¼š

```bash
# ç»Ÿè®¡ feat å’Œ fix æäº¤
feat_count = git log ä¸­ "feat" çš„æ•°é‡
fix_count = git log ä¸­ "fix" çš„æ•°é‡

if feat_count > 0:
    ç‰ˆæœ¬å‡çº§: minor (1.0.2 â†’ 1.1.0)
elif fix_count > 0:
    ç‰ˆæœ¬å‡çº§: patch (1.0.2 â†’ 1.0.3)
else:
    ç‰ˆæœ¬ä¸å˜
```

#### C. åˆ›å»º/æ›´æ–° Release PR
- åœ¨ `website-release` åˆ†æ”¯ä¸Š
- æ›´æ–° `packages/website/package.json` ç‰ˆæœ¬å·
- PR æ ‡é¢˜ï¼š`ğŸš€ Website Release: v{version}`
- PR å†…å®¹åŒ…å«ï¼š
  - å½“å‰ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬
  - ç‰ˆæœ¬å˜æ›´ç±»å‹ï¼ˆpatch/minor/majorï¼‰
  - Preview éƒ¨ç½² URL
  - å˜æ›´æ‘˜è¦

**PR æ›´æ–°ç­–ç•¥**ï¼š
- è‹¥å·²æœ‰å¼€æ”¾çš„ Release PRï¼Œè‡ªåŠ¨æ›´æ–°å…¶å†…å®¹å’Œæäº¤
- è‹¥æ—  Release PRï¼Œè‡ªåŠ¨åˆ›å»ºæ–°çš„
- æ¯æ¬¡æœ‰æ–°çš„ website å˜åŒ–éƒ½ä¼šæ›´æ–° PR

**ç¤ºä¾‹ PR å†…å®¹**ï¼š
```markdown
## ğŸš€ Website Release

### ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯
- **å½“å‰ç‰ˆæœ¬**: `1.0.2`
- **æ–°ç‰ˆæœ¬**: `1.0.3`
- **ç‰ˆæœ¬ç±»å‹**: `patch`

### ğŸ”— é¢„è§ˆé“¾æ¥
- **Preview URL**: [https://dev-to-preview.vercel.app](...)
- **éƒ¨ç½²æ—¶é—´**: 2026-01-14
- **éƒ¨ç½²çŠ¶æ€**: âœ… æˆåŠŸ

### ğŸ“ å˜æ›´æ‘˜è¦
- feat: add new section layout
- fix: responsive design on mobile

### âœ¨ å¦‚ä½•å‘å¸ƒï¼Ÿ
1. æ£€æŸ¥é¢„è§ˆé“¾æ¥ä¸­çš„æ›´æ”¹
2. å¦‚æœæ»¡æ„ï¼Œåˆå¹¶æ­¤ PR åˆ° `main`
3. è‡ªåŠ¨éƒ¨ç½²åˆ° Vercel Production
```

### 2. Production éƒ¨ç½²å·¥ä½œæµ (`website-release-deploy.yml`)

**è§¦å‘æ¡ä»¶**ï¼š
- `website-release` åˆ†æ”¯å‘ `main` åˆ†æ”¯çš„ PR è¢«åˆå¹¶

**æ‰§è¡Œæ­¥éª¤**ï¼š

#### A. éƒ¨ç½²åˆ° Vercel Production
```bash
# 1. æ£€å‡º main åˆ†æ”¯ä»£ç 
# 2. å®‰è£…ä¾èµ–
# 3. æ„å»ºé¡¹ç›®
# 4. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel deploy --prebuilt --prod --token=$VERCEL_TOKEN
```

#### B. åˆ›å»º GitHub Release
- æ ‡ç­¾åï¼š`website-v{version}` (e.g., `website-v1.0.3`)
- Release åç§°ï¼š`Website v{version}`
- Release å†…å®¹åŒ…å«ç”Ÿäº§ URL å’Œéƒ¨ç½²ä¿¡æ¯

## ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬å·æ ¼å¼
é‡‡ç”¨ Semantic Versioningï¼š`MAJOR.MINOR.PATCH`

- **MAJOR**ï¼šé‡å¤§åŠŸèƒ½å˜æ›´ï¼Œä¸å…¼å®¹çš„æ”¹åŠ¨
- **MINOR**ï¼šæ–°å¢åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- **PATCH**ï¼šbug ä¿®å¤ï¼Œå‘åå…¼å®¹

### Commit æ¶ˆæ¯çº¦å®š
éµå¾ª Conventional Commits è§„èŒƒï¼š

```
feat: æ–°å¢åŠŸèƒ½      â†’ è§¦å‘ minor ç‰ˆæœ¬å‡çº§
fix: bug ä¿®å¤       â†’ è§¦å‘ patch ç‰ˆæœ¬å‡çº§
docs: æ–‡æ¡£æ›´æ–°      â†’ ä¸å‡çº§ç‰ˆæœ¬
style: ä»£ç é£æ ¼     â†’ ä¸å‡çº§ç‰ˆæœ¬
refactor: ä»£ç é‡æ„  â†’ ä¸å‡çº§ç‰ˆæœ¬
perf: æ€§èƒ½ä¼˜åŒ–      â†’ patch ç‰ˆæœ¬å‡çº§
test: æµ‹è¯•          â†’ ä¸å‡çº§ç‰ˆæœ¬
chore: æ„å»º/å·¥å…·    â†’ ä¸å‡çº§ç‰ˆæœ¬
```

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šä¿®å¤ Bug
```bash
# 1. ä¿®æ”¹ packages/website ä¸­çš„ä»£ç 
# 2. æäº¤æ—¶ä½¿ç”¨ fix: å‰ç¼€
git commit -m "fix(website): correct button alignment"

# 3. æ¨é€åˆ° main
git push origin main

# 4. ç³»ç»Ÿè‡ªåŠ¨ï¼š
#    - éƒ¨ç½² preview
#    - åˆ›å»º Release PRï¼ˆpatch ç‰ˆæœ¬å‡çº§ï¼‰
#    - ç­‰å¾…äººå·¥å®¡æ ¸

# 5. å®¡æ ¸é¢„è§ˆé“¾æ¥åï¼Œåˆå¹¶ PR
# 6. ç³»ç»Ÿè‡ªåŠ¨éƒ¨ç½²åˆ° production
```

### åœºæ™¯ 2ï¼šæ·»åŠ æ–°åŠŸèƒ½
```bash
# 1. ä¿®æ”¹ä»£ç 
# 2. ä½¿ç”¨ feat: å‰ç¼€æäº¤
git commit -m "feat(website): add dark mode toggle"

# 3. ç³»ç»Ÿè‡ªåŠ¨ï¼š
#    - éƒ¨ç½² previewï¼ˆURL åœ¨ PR ä¸­ï¼‰
#    - åˆ›å»º Release PRï¼ˆminor ç‰ˆæœ¬å‡çº§ï¼‰

# 4. åˆå¹¶åè‡ªåŠ¨å‘å¸ƒåˆ°ç”Ÿäº§
```

### åœºæ™¯ 3ï¼šä»…æ›´æ–°æ–‡æ¡£
```bash
# 1. ä¿®æ”¹ç½‘ç«™æ–‡æ¡£
# 2. ä½¿ç”¨ docs: å‰ç¼€æäº¤
git commit -m "docs(website): update README"

# 3. ç³»ç»Ÿå°†åªè¿›è¡Œ preview éƒ¨ç½²
# 4. ä¸ä¼šåˆ›å»º Release PRï¼ˆå› ä¸ºæ²¡æœ‰ feat/fixï¼‰
```

## å¸¸è§é—®é¢˜

### Q1ï¼šPreview URL æœ‰æ•ˆæœŸå¤šä¹…ï¼Ÿ
**A**ï¼šVercel preview éƒ¨ç½²é“¾æ¥é€šå¸¸æœ‰æ•ˆæœŸä¸º 7 å¤©ã€‚å»ºè®®åœ¨æ­¤æœŸé—´å®Œæˆå®¡æ ¸å’Œéƒ¨ç½²ã€‚

### Q2ï¼šå¦‚ä½•æ‰‹åŠ¨è§¦å‘å·¥ä½œæµï¼Ÿ
**A**ï¼š
1. è¿›å…¥ GitHub ä»“åº“ â†’ Actions é€‰é¡¹å¡
2. é€‰æ‹© "Website Preview Deploy" æˆ– "Website Release Deploy"
3. ç‚¹å‡» "Run workflow"
4. é€‰æ‹©åˆ†æ”¯å’Œå‚æ•°

### Q3ï¼šRelease PR èƒ½å¦ä¿®æ”¹ç‰ˆæœ¬å·ï¼Ÿ
**A**ï¼šå¯ä»¥ã€‚Release PR ä¸­ä¼šåŒ…å«ç‰ˆæœ¬å·ä¿¡æ¯ï¼Œå®¡æ ¸æ—¶å¯ä»¥æ£€æŸ¥å¹¶è°ƒæ•´ã€‚

### Q4ï¼šå¦‚ä½•åœ¨æ²¡æœ‰äººå·¥å®¡æ ¸çš„æƒ…å†µä¸‹è‡ªåŠ¨å‘å¸ƒï¼Ÿ
**A**ï¼šç§»é™¤ PR çš„ä¿æŠ¤è§„åˆ™ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚æœ€ä½³å®è·µæ˜¯å§‹ç»ˆè¿›è¡Œ preview å®¡æ ¸ã€‚

### Q5ï¼šProduction éƒ¨ç½²å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ
**A**ï¼š
1. æ£€æŸ¥ GitHub Actions æ—¥å¿—
2. æ£€æŸ¥ Vercel éƒ¨ç½²çŠ¶æ€
3. æ’æŸ¥ Secrets é…ç½®æ˜¯å¦æ­£ç¡®
4. å¯ä»¥æ‰‹åŠ¨åœ¨ Vercel Dashboard ä¸Šé‡æ–°éƒ¨ç½²

## ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹å·¥ä½œæµæ—¥å¿—
1. è¿›å…¥ GitHub ä»“åº“ â†’ Actions
2. é€‰æ‹©å…·ä½“çš„å·¥ä½œæµè¿è¡Œ
3. æŸ¥çœ‹è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—

### å…³é”®æ—¥å¿—ä½ç½®
- **Vercel éƒ¨ç½²æ—¥å¿—**ï¼šworkflow ä¸­çš„ "Deploy to Vercel" æ­¥éª¤
- **ç‰ˆæœ¬è®¡ç®—æ—¥å¿—**ï¼šworkflow ä¸­çš„ "Get Current Version" æ­¥éª¤
- **PR åˆ›å»ºæ—¥å¿—**ï¼šworkflow ä¸­çš„ "Create/Update Release PR" æ­¥éª¤

## æœ€ä½³å®è·µ

1. **å§‹ç»ˆè¿›è¡Œ preview å®¡æ ¸**
   - æ£€æŸ¥ preview URL ä¸­çš„å®é™…æ•ˆæœ
   - éªŒè¯æ ·å¼å’Œäº¤äº’åŠŸèƒ½

2. **éµå¾ª Conventional Commits**
   - ä½¿ç”¨ `feat:`ã€`fix:` ç­‰å‰ç¼€
   - ä¿è¯ç‰ˆæœ¬å·è‡ªåŠ¨é€’å¢çš„å‡†ç¡®æ€§

3. **åŠæ—¶åˆå¹¶ Release PR**
   - é¿å…å¤šä¸ª Release PR åŒæ—¶å­˜åœ¨
   - åŠæ—¶éƒ¨ç½²é¿å… preview é“¾æ¥å¤±æ•ˆ

4. **å®šæœŸæ£€æŸ¥éƒ¨ç½²çŠ¶æ€**
   - ç›‘æ§ Actions è¿è¡ŒçŠ¶æ€
   - åŠæ—¶å‘ç°å’Œå¤„ç†éƒ¨ç½²å¤±è´¥

5. **ä¿ç•™éƒ¨ç½²å†å²**
   - GitHub Release ä¼šè‡ªåŠ¨ä¿ç•™ç‰ˆæœ¬å†å²
   - ä¾¿äºå›æº¯å’Œé—®é¢˜è¯Šæ–­

## æŠ€æœ¯æ ˆ

- **CI/CD**ï¼šGitHub Actions
- **æ„å»ºå·¥å…·**ï¼šVercel CLI
- **éƒ¨ç½²å¹³å°**ï¼šVercel
- **ç‰ˆæœ¬ç®¡ç†**ï¼šGit æ ‡ç­¾ + è¯­ä¹‰åŒ–ç‰ˆæœ¬
- **è„šæœ¬è¯­è¨€**ï¼šBash + JavaScript (GitHub Script)

## ç›¸å…³æ–‡ä»¶

- `.github/workflows/website-preview-deploy.yml` - Preview éƒ¨ç½²å·¥ä½œæµ
- `.github/workflows/website-release-deploy.yml` - Production éƒ¨ç½²å·¥ä½œæµ
- `packages/website/package.json` - ç½‘ç«™ç‰ˆæœ¬é…ç½®
- `scripts/website-release.mjs` - ç‰ˆæœ¬è®¡ç®—ä¸ PR ä¿¡æ¯ç”Ÿæˆè„šæœ¬
