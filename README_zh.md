# Æ‰ev-to

ä¸­æ–‡ | [English](./README.md)

ä¸€å¥—é¢å‘ **AI Agent å¹³å°**å’Œ**æ™ºèƒ½ä½“å®¹å™¨**çš„ React/Vue ç»„ä»¶å¼€å‘å·¥å…·é“¾ï¼Œè®©ç¬¬ä¸‰æ–¹å¼€å‘è€…äº«å—"æœ¬åœ°çº§"çš„å¼€å‘ä½“éªŒã€‚

> **ğŸš€ å¿«é€Ÿå¼€å§‹ï¼š** `npm create dev-to` - 30 ç§’åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼

## ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

éšç€ AI Agent å’Œæ™ºèƒ½ä½“å¹³å°çš„å…´èµ·ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šï¼ˆå¦‚é›†å›¢å…¬å¸ã€AI å¹³å°ï¼‰éœ€è¦æ„å»ºä¸€ä¸ª**æ™ºèƒ½ä½“å®¹å™¨**ï¼Œå…è®¸ï¼š
- ğŸ¤– é›†å›¢å†…ä¸åŒä¸šåŠ¡çº¿å¼€å‘å„è‡ªçš„æ™ºèƒ½ä½“å¡ç‰‡
- ğŸ”Œ ç¬¬ä¸‰æ–¹å¼€å‘è€…ä¸ºå¹³å°æä¾›æ’ä»¶ç»„ä»¶
- ğŸ¢ å¤šå›¢é˜Ÿåä½œï¼Œå„è‡ªç»´æŠ¤ç‹¬ç«‹çš„ä¸šåŠ¡ç»„ä»¶

**ä¼ ç»Ÿå¼€å‘æ¨¡å¼çš„ç—›ç‚¹ï¼š**

1. **å®¿ä¸»ç¯å¢ƒé»‘ç›’**: ç»„ä»¶å¿…é¡»éƒ¨ç½²åˆ°å®¹å™¨æ‰èƒ½è°ƒè¯•ï¼Œå¼€å‘è€…çœ‹ä¸åˆ°å®¿ä¸»å†…éƒ¨ç»†èŠ‚
2. **è°ƒè¯•åé¦ˆæ…¢**: æ¯æ¬¡ä¿®æ”¹éƒ½è¦é‡æ–°æ„å»ºã€éƒ¨ç½²ï¼Œæ— æ³•äº«å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰
3. **ç”Ÿäº§ç¯å¢ƒéš¾è°ƒè¯•**: çº¿ä¸Šé—®é¢˜æ— æ³•åƒæœ¬åœ°ä¸€æ ·æ‰“æ–­ç‚¹ã€æŸ¥çœ‹æ—¥å¿—
4. **èµ„æºè·¯å¾„é—®é¢˜**: ç»„ä»¶ä¸­çš„å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºåœ¨å®¹å™¨ç¯å¢ƒä¸­ 404
5. **è¿è¡Œæ—¶å†²çª**: å®¹å™¨å’Œç»„ä»¶å„è‡ªçš„ React å®ä¾‹å†²çªï¼Œå¯¼è‡´ Hook æŠ¥é”™

**dev-to çš„è§£å†³æ–¹æ¡ˆï¼š**

âœ¨ **å®¿ä¸»ç»†èŠ‚éšè—ï¼Œç»„ä»¶é€»è¾‘é€æ˜**
- å¼€å‘è€…æ— éœ€å…³å¿ƒå®¹å™¨çš„å¤æ‚æ€§ï¼Œä¸“æ³¨äºè‡ªå·±çš„ç»„ä»¶å¼€å‘
- åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œç»„ä»¶å†…éƒ¨é€»è¾‘å®Œå…¨æ•äº®ï¼Œæ”¯æŒæ–­ç‚¹ã€æ—¥å¿—ã€çƒ­æ›´æ–°

âš¡ **æœ¬åœ°å¼€å‘ â‰ˆ ç”Ÿäº§è°ƒè¯•**
- åœ¨æœ¬åœ° Vite Dev Server ä¸Šå¼€å‘ï¼Œå®¹å™¨å®æ—¶åŠ è½½å¹¶çƒ­æ›´æ–°
- ç”Ÿäº§ç¯å¢ƒä¹Ÿèƒ½äº«å—ç±»ä¼¼æœ¬åœ°çš„è°ƒè¯•ä½“éªŒï¼ˆå¯é€‰ï¼‰

ğŸ”— **æ ‡å‡†åŒ–æ¡¥æ¥åè®®**
- ç»Ÿä¸€çš„ç»„ä»¶åŠ è½½è§„èŒƒï¼Œå®¹å™¨å’Œç»„ä»¶è§£è€¦
- æ”¯æŒå¤šå›¢é˜Ÿã€è·¨ç»„ç»‡çš„åä½œå¼€å‘

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ é¢å‘ AI Agent å¹³å°çš„è®¾è®¡

- **å®¹å™¨ â†” ç»„ä»¶è§£è€¦**: å®¹å™¨æä¾›æ ‡å‡†åŒ–çš„åŠ è½½æ¥å£ï¼Œç»„ä»¶å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
- **ç¬¬ä¸‰æ–¹å‹å¥½**: å¤–éƒ¨å¼€å‘è€…æ— éœ€äº†è§£å®¹å™¨å†…éƒ¨å®ç°ï¼Œåªéœ€æŒ‰è§„èŒƒå¼€å‘ç»„ä»¶
- **å¤šå›¢é˜Ÿåä½œ**: é›†å›¢å†…å„ä¸šåŠ¡çº¿ç‹¬ç«‹ç»´æŠ¤è‡ªå·±çš„æ™ºèƒ½ä½“å¡ç‰‡ï¼Œäº’ä¸å¹²æ‰°

### ğŸš€ æè‡´çš„å¼€å‘ä½“éªŒ

- âš¡ **è·¨ç¯å¢ƒ HMR**: åœ¨æœ¬åœ° Vite å¼€å‘ï¼Œå®¹å™¨å®æ—¶çƒ­æ›´æ–°ï¼Œç§’çº§åé¦ˆ
- ğŸ› **ç”Ÿäº§çº§è°ƒè¯•**: æ”¯æŒåœ¨ç”Ÿäº§ç¯å¢ƒçš„å®¹å™¨ä¸­åŠ è½½æœ¬åœ°å¼€å‘ç‰ˆç»„ä»¶ï¼Œåƒæœ¬åœ°ä¸€æ ·è°ƒè¯•
- ğŸ” **å®Œå…¨é€æ˜**: ç»„ä»¶å†…éƒ¨æ–­ç‚¹ã€æ—¥å¿—ã€æºç æ˜ å°„å®Œæ•´å¯ç”¨
- ğŸ–¼ï¸ **èµ„æºè‡ªåŠ¨å¤„ç†**: CSSã€å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æºè‡ªåŠ¨é‡å®šå‘åˆ° Vite Dev Server

### ğŸ“¦ å®Œæ•´çš„å·¥å…·é“¾

- ğŸ› ï¸ **å†…ç½®è°ƒè¯•é¢æ¿**: å¯è§†åŒ–æŸ¥çœ‹ç»„ä»¶æ˜ å°„ã€HMR ç»Ÿè®¡ã€èµ„æºè¿½è¸ª
- ğŸ“¤ **UMD æ„å»º**: ä¸€é”®å°†ç»„ä»¶æ‰“åŒ…ä¸ºå¯ç‹¬ç«‹åˆ†å‘çš„ UMD åŒ…
- ğŸš€ **å¿«é€Ÿè„šæ‰‹æ¶**: è‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ç»„ä»¶é¡¹ç›®æ¨¡æ¿
- ğŸ”— **è¿è¡Œæ—¶å…±äº«**: ç»Ÿä¸€ React å®ä¾‹ï¼Œé¿å…å¤šå®ä¾‹å†²çª

---

## ğŸ” ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆæ¦‚è§ˆ

| æ–¹æ¡ˆ | æ ¸å¿ƒå®šä½ | æˆç†Ÿåº¦ |
|------|----------|--------|
| **Module Federation** | æ„å»ºæ—¶æ¨¡å—è”é‚¦ï¼ˆWebpack/Vite åŸç”Ÿï¼‰ | ç”Ÿäº§å°±ç»ª |
| **qiankun** | è¿è¡Œæ—¶åº”ç”¨éš”ç¦»ï¼ˆå¾®å‰ç«¯ï¼‰ | ç”Ÿäº§å°±ç»ª |
| **micro-app** | ç±» WebComponent å¾®å‰ç«¯ | ç”Ÿäº§å°±ç»ª |
| **single-spa** | å¾®å‰ç«¯è·¯ç”±ç¼–æ’ | ç”Ÿäº§å°±ç»ª |
| **dev-to** | è·¨ç¯å¢ƒç»„ä»¶çƒ­æ›´æ–° | æ—©æœŸé˜¶æ®µ |

### åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | Module Federation | qiankun | micro-app | single-spa | dev-to |
|------|-------------------|---------|-----------|------------|--------|
| **è¿è¡Œæ—¶æ¨¡å—å…±äº«** | åŸç”Ÿæ”¯æŒ | éœ€é…ç½® | éœ€é…ç½® | éœ€é…ç½® | åŸç”Ÿæ”¯æŒ |
| **è·¨åº”ç”¨ HMR** | éƒ¨åˆ†æ”¯æŒ | ä¸æ”¯æŒ | ä¸æ”¯æŒ | ä¸æ”¯æŒ | æ ¸å¿ƒç‰¹æ€§ |
| **JS æ²™ç®±** | æ—  | Proxy æ²™ç®± | iframe/Proxy | æ—  | æ—  |
| **CSS éš”ç¦»** | æ—  | Shadow DOM/Scoped | Shadow DOM | æ—  | CSS Modules |
| **è·¯ç”±ç®¡ç†** | æ—  | æ”¯æŒ | æ”¯æŒ | æ ¸å¿ƒç‰¹æ€§ | æ—  |
| **é¢„åŠ è½½** | æ”¯æŒ | æ”¯æŒ | æ”¯æŒ | æ”¯æŒ | æ—  |
| **å¤šæ¡†æ¶æ”¯æŒ** | æ˜¯ | æ˜¯ | æ˜¯ | æ˜¯ | React + Vueï¼ˆå¼€å‘æ€ï¼‰ |
| **TypeScript ç±»å‹å…±äº«** | éœ€æ’ä»¶ | æ—  | æ—  | æ—  | åŸç”Ÿæ”¯æŒ |

### å¼€å‘ä½“éªŒå¯¹æ¯”

| æŒ‡æ ‡ | Module Federation | qiankun | dev-to |
|------|-------------------|---------|--------|
| **é¦–æ¬¡é…ç½®æ—¶é—´** | 30-60 åˆ†é’Ÿ | 15-30 åˆ†é’Ÿ | ~5 åˆ†é’Ÿ |
| **è·¨åº”ç”¨ HMR** | éœ€åˆ·æ–°å®¿ä¸» | éœ€å®Œå…¨åˆ·æ–° | å®æ—¶çƒ­æ›´æ–° |
| **è°ƒè¯•å·¥å…·** | æ— å†…ç½® | æ— å†…ç½® | å†…ç½®è°ƒè¯•é¢æ¿ |
| **ç±»å‹æç¤º** | éœ€ @mf-types | æ—  | åŸç”Ÿæ”¯æŒ |

### å¦‚ä½•é€‰æ‹©

```
éœ€è¦å¼€å‘æ—¶è·¨ç¯å¢ƒ HMRï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ dev-toï¼ˆç›®å‰å”¯ä¸€åŸç”Ÿæ”¯æŒçš„æ–¹æ¡ˆï¼‰
â””â”€â”€ å¦ â†“

éœ€è¦ JS/CSS æ²™ç®±éš”ç¦»ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ qiankun / micro-app
â””â”€â”€ å¦ â†“

éœ€è¦æ¨¡å—çº§å…±äº«ï¼ˆè€Œéåº”ç”¨çº§ï¼‰ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ Module Federation
â””â”€â”€ å¦ â†“

éœ€è¦å¤šæ¡†æ¶æ··åˆï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ single-spa + æ¡†æ¶é€‚é…å™¨
â””â”€â”€ å¦ â†’ æ ¹æ®å…·ä½“åœºæ™¯è¯„ä¼°
```

### æ€»ç»“

| æ–¹æ¡ˆ | æœ€ä½³åœºæ™¯ |
|------|----------|
| **Module Federation** | å¤§è§„æ¨¡ç»„ä»¶/æ¨¡å—è·¨åº”ç”¨å…±äº« |
| **qiankun** | ä¼ä¸šçº§å¤šå›¢é˜Ÿå¾®å‰ç«¯éš”ç¦» |
| **micro-app** | å¿«é€Ÿæ¥å…¥é—ç•™ç³»ç»Ÿ |
| **single-spa** | å¤šæ¡†æ¶æ¸è¿›å¼è¿ç§» |
| **dev-to** | AI Agent æ’ä»¶å¹³å°ã€è¿½æ±‚æè‡´ DX çš„ç»„ä»¶çƒ­æ›´æ–°åœºæ™¯ |

**dev-to çš„ç‹¬ç‰¹ä»·å€¼ï¼š** ç›®å‰å”¯ä¸€ä¸“æ³¨äº"å®¿ä¸»å®¹å™¨å†…å®æ—¶ HMR"çš„æ–¹æ¡ˆã€‚å¦‚æœä½ çš„æ ¸å¿ƒç—›ç‚¹æ˜¯"ç¬¬ä¸‰æ–¹å¼€å‘è€…åœ¨æœ¬åœ°å¼€å‘ï¼Œå®¿ä¸»ç¯å¢ƒå®æ—¶é¢„è§ˆ"ï¼Œdev-to æ˜¯æœ€ç›´æ¥çš„é€‰æ‹©ã€‚ä½†å¦‚æœéœ€è¦æ²™ç®±éš”ç¦»ã€è·¯ç”±ç®¡ç†ç­‰ä¼ä¸šçº§èƒ½åŠ›ï¼Œåº”è€ƒè™‘ qiankun æˆ– Module Federationã€‚

---

## ğŸ“¦ Packages

| Package | Version | è¯´æ˜ |
|---------|---------|------|
| [create-dev-to](./packages/create-dev-to) | [![npm](https://img.shields.io/npm/v/create-dev-to.svg)](https://www.npmjs.com/package/create-dev-to) | ğŸš€ **è„šæ‰‹æ¶å·¥å…·** - å¿«é€Ÿåˆ›å»ºé›†æˆ dev-to çš„å‰ç«¯é¡¹ç›®ï¼ˆæ”¯æŒå¤šæ¡†æ¶ï¼‰ |
| [@dev-to/react-plugin](./packages/react-plugin) | [![npm](https://img.shields.io/npm/v/@dev-to/react-plugin.svg)](https://www.npmjs.com/package/@dev-to/react-plugin) | âš¡ **Vite ä¾§æ’ä»¶** - åœ¨ Vite Dev Server ä¸Šæš´éœ²ç¨³å®šçš„æ¡¥æ¥å…¥å£ |
| [@dev-to/react-loader](./packages/react-loader) | [![npm](https://img.shields.io/npm/v/@dev-to/react-loader.svg)](https://www.npmjs.com/package/@dev-to/react-loader) | ğŸ”Œ **å®¿ä¸»ä¾§åŠ è½½å™¨** - åœ¨ä»»æ„é¡µé¢ä¸­åŠ¨æ€åŠ è½½è¿œç¨‹ React ç»„ä»¶ |
| [@dev-to/shared](./packages/shared) | [![npm](https://img.shields.io/npm/v/@dev-to/shared.svg)](https://www.npmjs.com/package/@dev-to/shared) | ğŸ“¡ **å…±äº«åè®®** - Vite ä¾§ä¸å®¿ä¸»ä¾§çš„é€šä¿¡åè®®å’Œç±»å‹å®šä¹‰ |
| [@dev-to/vue-plugin](./packages/vue-plugin) | [![npm](https://img.shields.io/npm/v/@dev-to/vue-plugin.svg)](https://www.npmjs.com/package/@dev-to/vue-plugin) | âš¡ **Vite ä¾§æ’ä»¶** - åœ¨ Vite Dev Server ä¸Šæš´éœ² Vue æ¡¥æ¥å…¥å£ |
| [@dev-to/vue-loader](./packages/vue-loader) | [![npm](https://img.shields.io/npm/v/@dev-to/vue-loader.svg)](https://www.npmjs.com/package/@dev-to/vue-loader) | ğŸ”Œ **å®¿ä¸»ä¾§åŠ è½½å™¨** - åœ¨ä»»æ„é¡µé¢ä¸­åŠ¨æ€åŠ è½½è¿œç¨‹ Vue ç»„ä»¶ |
| [website](./packages/website) | - | ğŸŒ **å®˜æ–¹ç½‘ç«™** - å†…ç½® Playground åœ¨çº¿è°ƒè¯•å·¥å…· |

> **æ³¨æ„ï¼š** æ—§çš„ç¤ºä¾‹åŒ…ï¼ˆ`react-template`ã€`react-playground`ã€`vue-template`ã€`vue-playground`ï¼‰å·²å½’æ¡£åˆ° `packages/archived/` ç›®å½•ã€‚

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å…¸å‹åœºæ™¯ï¼šAI Agent å¹³å° + ç¬¬ä¸‰æ–¹å¼€å‘è€…

```mermaid
graph TB
    subgraph Container["ğŸ—ï¸ AI Agent æ™ºèƒ½ä½“å®¹å™¨ (é›†å›¢/å¹³å°)"]
        subgraph Runtime["å®¹å™¨è¿è¡Œæ—¶ (React Application)"]
            R["â€¢ æä¾›ç»Ÿä¸€çš„ UI æ¡†æ¶ â€¢ ç®¡ç†æ™ºèƒ½ä½“ç”Ÿå‘½å‘¨æœŸ â€¢ å¤„ç†ç”¨æˆ·äº¤äº’å’Œè·¯ç”±"]
        end

        subgraph Loader["@dev-to/react-loader (ç»„ä»¶åŠ è½½å±‚)"]
            L["â€¢ åŠ è½½è¿œç¨‹ç»„ä»¶ (å¼€å‘ç¯å¢ƒ: Vite Dev Server) â€¢ åŠ è½½è¿œç¨‹ç»„ä»¶ (ç”Ÿäº§ç¯å¢ƒ: CDN/é™æ€æœåŠ¡å™¨) â€¢ æ”¯æŒå¼€å‘/ç”Ÿäº§æ— ç¼åˆ‡æ¢"]
        end
    end

    Container -->|HTTP/S| DevA
    Container -->|HTTP/S| DevB
    Container -->|HTTP/S| DevC

    subgraph DevA["ä¸šåŠ¡çº¿ A (æœ¬åœ°å¼€å‘)"]
        A["Vite Dev localhost:5173<br/><br/>@dev-to/react-plugin<br/><br/>ç»„ä»¶: å®¢æœå¡ç‰‡, è®¢å•å¡ç‰‡"]
    end

    subgraph DevB["ä¸šåŠ¡çº¿ B (æœ¬åœ°å¼€å‘)"]
        B["Vite Dev localhost:5174<br/><br/>@dev-to/react-plugin<br/><br/>ç»„ä»¶: æŠ¥è¡¨å¡ç‰‡, å®¡æ‰¹å¡ç‰‡"]
    end

    subgraph DevC["ç¬¬ä¸‰æ–¹å¼€å‘è€… (æœ¬åœ°å¼€å‘)"]
        C["Vite Dev localhost:5175<br/><br/>@dev-to/react-plugin<br/><br/>ç»„ä»¶: å¤©æ°”æ’ä»¶, æ—¥å†æ’ä»¶"]
    end
```

**æ¨¡å¼è¯´æ˜ï¼š**
- ã€å¼€å‘æ¨¡å¼ã€‘å®¹å™¨åŠ è½½ `http://localhost:517X` ä¸Šçš„ç»„ä»¶ â†’ å®æ—¶ HMR
- ã€ç”Ÿäº§æ¨¡å¼ã€‘å®¹å™¨åŠ è½½ CDN ä¸Šçš„ UMD åŒ… â†’ ç¨³å®šè¿è¡Œ
- ã€ç”Ÿäº§è°ƒè¯•ã€‘å®¹å™¨ä¸´æ—¶åˆ‡æ¢åˆ° `http://localhost:517X` â†’ åƒæœ¬åœ°ä¸€æ ·è°ƒè¯•

### å·¥ä½œæµç¨‹

**ğŸ”¨ ç»„ä»¶å¼€å‘è€…çš„è§†è§’**

1. ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºç»„ä»¶é¡¹ç›®
2. åœ¨æœ¬åœ° Vite Dev Server å¼€å‘ï¼ˆå¦‚ `localhost:5173`ï¼‰
3. å‘ŠçŸ¥å®¹å™¨å›¢é˜Ÿç»„ä»¶çš„è®¿é—®åœ°å€å’Œåç§°
4. å®¹å™¨å›¢é˜Ÿåœ¨å®¹å™¨ä¸­é…ç½®åŠ è½½è¯¥ç»„ä»¶
5. **å¼€å‘è€…ä¿®æ”¹ä»£ç  â†’ å®¹å™¨ä¸­çš„ç»„ä»¶å®æ—¶çƒ­æ›´æ–°** âš¡
6. è°ƒè¯•å®Œæˆåï¼Œæ„å»º UMD åŒ…å¹¶éƒ¨ç½²åˆ° CDN

**ğŸ¢ å®¹å™¨å›¢é˜Ÿçš„è§†è§’**

1. åœ¨å®¹å™¨ä¸­é›†æˆ `@dev-to/react-loader`
2. é…ç½®éœ€è¦åŠ è½½çš„ç»„ä»¶åˆ—è¡¨ï¼ˆå¯åŠ¨æ€é…ç½®ï¼‰
3. å¼€å‘ç¯å¢ƒï¼šåŠ è½½å¼€å‘è€…çš„æœ¬åœ° Vite Dev Server
4. ç”Ÿäº§ç¯å¢ƒï¼šåŠ è½½ CDN ä¸Šçš„ UMD åŒ…
5. **æ— éœ€ä¿®æ”¹å®¹å™¨ä»£ç ï¼Œæ–°ç»„ä»¶å³å¯æ¥å…¥** ğŸ”Œ

### æ ¸å¿ƒé€šä¿¡åè®®

**Unified Discovery Endpoint** - ç»Ÿä¸€å‘ç°ç«¯ç‚¹ (`/__dev_to__/discovery.json`) - v2.0+

```json5
{
  framework: {
    type: 'react',
    version: '18.2.0'
  },
  server: {
    host: 'localhost',
    port: 5173,
    protocol: 'http',
    origins: ['http://localhost:5173', 'http://127.0.0.1:5173', 'http://192.168.x.x:5173']
  },
  endpoints: {
    discovery: '/__dev_to__/discovery.json',
    contract: '/__dev_to__/react/contract.js',
    init: '/__dev_to__/react/init.js',
    runtime: '/__dev_to__/react/runtime.js',
    debug: {
      html: '/__dev_to__/debug.html',
      json: '/__dev_to__/debug.json'
    },
    loader: {
      base: '/__dev_to__/react/loader',
      umd: '/__dev_to__/react/loader.js'
    }
  },
  components: {
    'MyCard': {
      name: 'MyCard',
      entry: 'src/components/MyCard.tsx',
      framework: 'react'
    }
  },
  events: {
    fullReload: 'dev_to:react:full-reload',
    hmrUpdate: 'dev_to:react:hmr-update'
  },
  protocol: {
    version: '2.0.0',
    apiLevel: 1
  }
}
```

**Legacy Bridge Contract** - å…¼å®¹æ—§ç‰ˆæœ¬ (`/__dev_to__/react/contract.js`)

```json5
{
  paths: {
    contract: '/__dev_to__/react/contract.js',
    initClient: '/__dev_to__/react/init.js',
    reactRuntime: '/__dev_to__/react/runtime.js'
  },
  events: {
    fullReload: 'dev_to:react:full-reload',
    hmrUpdate: 'dev_to:react:hmr-update'
  },
  dev: {
    componentMap: {
      'MyCard': 'src/components/MyCard.tsx',
      // ...
    }
  }
}
```

### åŒ…ä¾èµ–å…³ç³»

```
@dev-to/shared (åŸºç¡€åè®®å±‚)
  â”œâ”€â”€ @dev-to/react-plugin (Vite ä¾§, React)
  â”œâ”€â”€ @dev-to/vue-plugin (Vite ä¾§, Vue)
  â”œâ”€â”€ @dev-to/react-loader (å®¿ä¸»ä¾§, React)
  â””â”€â”€ @dev-to/vue-loader (å®¿ä¸»ä¾§, Vue)

create-dev-to (ç‹¬ç«‹è„šæ‰‹æ¶)

website (å®˜æ–¹ç½‘ç«™ + Playground)
```

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### æ–¹å¼ 1: ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›® â­ æ¨è

ä½¿ç”¨ `create-dev-to` ä¸€é”®åˆ›å»ºé¡¹ç›®ï¼Œä½“éªŒæé€Ÿå¼€å‘ï¼š

```bash
# ä½¿ç”¨ä½ å–œæ¬¢çš„åŒ…ç®¡ç†å™¨
npm create dev-to
# æˆ–
pnpm create dev-to
# æˆ–
yarn create dev-to
# æˆ–
bun create dev-to
```

**è„šæ‰‹æ¶ç‰¹æ€§ï¼š**

âœ¨ **æ™ºèƒ½å¼•å¯¼**
- ğŸ¨ é€‰æ‹©æ¡†æ¶ (React/Vue âœ… å·²æ”¯æŒ | Svelte/Solid ç­‰å³å°†æ¨å‡º)
- ğŸ“¦ é€‰æ‹©åŒ…ç®¡ç†å™¨ (pnpm/npm/yarn/bun)
- ğŸ”§ é€‰æ‹©æ¨¡æ¿ (React/Vueï¼ŒTypeScript/JavaScriptï¼Œæ”¯æŒ SWC)
- ğŸ¯ å¯é€‰ Rolldown å®éªŒæ€§æ”¯æŒ

âš¡ **å¼€ç®±å³ç”¨**
- è‡ªåŠ¨æ³¨å…¥ `@dev-to/react-plugin` åˆ° `vite.config.ts`
- è‡ªåŠ¨å®‰è£…æ‰€æœ‰ä¾èµ–
- è‡ªåŠ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- ç¾è§‚çš„å®‰è£…è¿›åº¦æ˜¾ç¤ºï¼ˆä¸‰é˜¶æ®µè¿›åº¦æ¡ + å®æ—¶ç»Ÿè®¡ï¼‰

ğŸ¬ **ä»åˆ›å»ºåˆ°è¿è¡Œï¼Œåªéœ€ 30 ç§’ï¼**

### æ–¹å¼ 2: æ‰‹åŠ¨é›†æˆåˆ°ç°æœ‰é¡¹ç›®

#### ç¬¬ä¸€æ­¥: å®‰è£…æ’ä»¶ (ç»„ä»¶æä¾›æ–¹)

```bash
npm install @dev-to/react-plugin -D
```

åœ¨ `vite.config.ts` ä¸­é…ç½®æ’ä»¶ï¼š

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { devToReactPlugin } from '@dev-to/react-plugin'

export default defineConfig({
  server: {
    port: 5173,
    cors: true, // é‡è¦ï¼šå…è®¸è·¨åŸŸè®¿é—®
  },
  plugins: [
    react(),
    devToReactPlugin({
      // å®šä¹‰å“ªäº›ç»„ä»¶éœ€è¦å¯¹å¤–æš´éœ²
      MyCard: 'src/components/MyCard.tsx',
      MyHeader: 'src/components/Header.tsx',
    }),
  ],
})
```

#### ç¬¬äºŒæ­¥: å®‰è£…åŠ è½½å™¨ (å®¿ä¸»åº”ç”¨)

```bash
npm install @dev-to/react-loader
```

åœ¨å®¿ä¸»åº”ç”¨ä¸­ä½¿ç”¨ `ReactLoader` ç»„ä»¶ï¼š

```tsx
import { ReactLoader } from '@dev-to/react-loader'

function App() {
  return (
    <div>
      <h1>å®¿ä¸»åº”ç”¨</h1>

      {/* åŠ è½½è¿œç¨‹ç»„ä»¶ */}
      <ReactLoader
        origin="http://localhost:5173"
        name="MyCard"
        componentProps={{ title: 'æ ‡é¢˜', count: 42 }}
      />
    </div>
  )
}
```

#### ç¬¬ä¸‰æ­¥: å¯åŠ¨å¼€å‘

```bash
# Terminal 1: å¯åŠ¨ç»„ä»¶æä¾›æ–¹ (Vite)
cd component-provider
npm run dev  # http://localhost:5173

# Terminal 2: å¯åŠ¨å®¿ä¸»åº”ç”¨
cd host-app
npm run dev  # http://localhost:8080

# è®¿é—® http://localhost:8080ï¼Œä¿®æ”¹ MyCard ä»£ç ä¼šè‡ªåŠ¨çƒ­æ›´æ–°ï¼
```

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. ç»„ä»¶æ˜ å°„é…ç½®

æ’ä»¶æ”¯æŒå¤šç§é…ç½®æ¨¡å¼ï¼š

```typescript
// A. é€šé…ç¬¦æ¨¡å¼ (é€‚åˆå¼€å‘è°ƒè¯•)
devToReactPlugin()

// B. å­—ç¬¦ä¸²å¿«æ·æ¨¡å¼
devToReactPlugin('MyCard')

// C. å¯¹è±¡æ˜ å°„æ¨¡å¼ (æ¨èï¼Œç”Ÿäº§å¿…é¡»)
devToReactPlugin({
  MyCard: 'src/components/MyCard.tsx',
  MyHeader: 'src/components/Header.tsx',
})
```

### 2. ReactLoader ä½¿ç”¨æ–¹å¼

```tsx
// æ–¹å¼ 1: ä½¿ç”¨ origin + name (æ¨è)
<ReactLoader
  origin="http://localhost:5173"
  name="MyCard"
  componentProps={{ title: 'æ ‡é¢˜' }}
/>

// æ–¹å¼ 2: ç›´æ¥æŒ‡å®š URL
<ReactLoader
  url="http://localhost:5173/@fs/path/to/MyCard.tsx"
  componentProps={{ title: 'æ ‡é¢˜' }}
/>
```

### 3. è°ƒè¯•é¢æ¿

å¯åŠ¨ Vite åè®¿é—®è°ƒè¯•é¢æ¿ï¼š

```
http://localhost:5173/__dev_to__/debug.html
```

æˆ–è®¿é—®å‘ç°ç«¯ç‚¹æŸ¥çœ‹ JSON æ ¼å¼çš„å®Œæ•´ä¿¡æ¯ï¼š

```
http://localhost:5173/__dev_to__/discovery.json
```

ä½ å¯ä»¥æŸ¥çœ‹ï¼š
- **Discovery Contract**: æ¡†æ¶ç±»å‹ã€ç‰ˆæœ¬ã€æœåŠ¡å™¨ä¿¡æ¯ã€æ‰€æœ‰å¯ç”¨ç«¯ç‚¹
- **Component Map**: ç»„ä»¶æ˜ å°„é…ç½®å’Œå…¥å£è·¯å¾„
- **HMR ç»Ÿè®¡**: çƒ­æ›´æ–°è§¦å‘æ¬¡æ•°å’Œæ—¶é—´
- **èµ„æºè¿½è¸ª**: å·²é‡å®šå‘çš„èµ„æºåˆ—è¡¨
- **å¿«é€Ÿæµ‹è¯•**: å¤åˆ¶ç²˜è´´ç¤ºä¾‹ä»£ç 

### 4. ç”Ÿäº§æ„å»º (Library Mode)

```bash
# æ„å»º UMD åŒ…
dev-to build
# æˆ–ï¼švite build --mode lib

# è¾“å‡ºç»“æ„:
# dist/
#   MyCard/
#     MyCard.js       # UMD bundle
#     MyCard.css      # æ ·å¼æ–‡ä»¶ (å¦‚æœ‰)
#     MyCard.d.ts     # ç±»å‹å®šä¹‰
#   MyHeader/
#     MyHeader.js
#     ...
```

å¦‚æœä½¿ç”¨ `create-dev-to` åˆ›å»ºé¡¹ç›®ï¼Œæ¨¡æ¿å†…ç½® `build:lib` è„šæœ¬ï¼ˆæ‰§è¡Œ `dev-to build`ï¼‰ï¼š

```bash
pnpm build:lib
```

æ”¯æŒé€ä¼  Vite çš„ build å‚æ•°ï¼Œä¾‹å¦‚ï¼š

```bash
dev-to build --sourcemap --outDir dist-lib
```

UMD åŒ…å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­ä½¿ç”¨ï¼š

```html
<script src="https://cdn.example.com/react.js"></script>
<script src="https://cdn.example.com/react-dom.js"></script>
<script src="/dist/MyCard/MyCard.js"></script>

<script>
  const { MyCard } = window.MyCard
  // ä½¿ç”¨ç»„ä»¶...
</script>
```

---

## âš™ï¸ é«˜çº§é…ç½®

### æ’ä»¶é€‰é¡¹

```js
devToReactPlugin(componentMap, {
  // æ˜¯å¦è‡ªåŠ¨æ‰“å¼€è°ƒè¯•é¢æ¿
  open: false,

  // CSS é…ç½® (é€ä¼ ç»™ Vite)
  css: {
    modules: {
      generateScopedName: '[name]__[local]___[hash:base64:5]',
    },
  },

  // æ„å»ºé…ç½® (ä»… lib æ¨¡å¼)
  build: {
    minify: true,
    sourcemap: true,
  },
})
```

### ReactLoader Props

```typescript
interface ReactLoaderProps {
  // ç»„ä»¶æä¾›æ–¹çš„ origin (ä¸ name é…åˆä½¿ç”¨)
  origin?: string

  // ç»„ä»¶åç§° (åœ¨ componentMap ä¸­å®šä¹‰çš„ key)
  name?: string

  // æˆ–ç›´æ¥æŒ‡å®šå®Œæ•´ URL
  url?: string

  // ä¼ é€’ç»™è¿œç¨‹ç»„ä»¶çš„ props
  componentProps?: Record<string, any>

  // è‡ªå®šä¹‰ contract ç«¯ç‚¹ (é€šå¸¸ä¸éœ€è¦)
  contractEndpoint?: string
}
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å— (æœ¬ä»“åº“)

### ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/YangYongAn/dev-to.git
cd dev-to

# å®‰è£…ä¾èµ– (ä½¿ç”¨ pnpm)
pnpm install
```

### å¼€å‘å‘½ä»¤

```bash
# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# ç›‘å¬æ¨¡å¼æ„å»º
pnpm dev

# ä»£ç æ£€æŸ¥
pnpm lint

# è¿è¡Œæµ‹è¯•
pnpm test
```

### è¿è¡Œ Playground

å®˜æ–¹ç½‘ç«™å†…ç½®äº† Playgroundï¼Œå¯è‡ªåŠ¨æ£€æµ‹æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼š

```bash
# Terminal 1: å¯åŠ¨å®˜ç½‘
cd packages/website
pnpm dev
# è®¿é—® http://localhost:5180/playground.html

# Terminal 2: å¯åŠ¨ä½ çš„ç»„ä»¶é¡¹ç›®
npm create dev-to my-app
cd my-app
pnpm dev
# Playground ä¼šè‡ªåŠ¨æ£€æµ‹ localhost:5173
```

**Playground åŠŸèƒ½ï¼š**
- è‡ªåŠ¨æ£€æµ‹ localhost:5173 å¼€å‘æœåŠ¡å™¨
- è‡ªåŠ¨è¯†åˆ«æ¡†æ¶ç±»å‹ï¼ˆReact/Vueï¼‰
- è°ƒè¯•é¢æ¿ï¼šè¿æ¥çŠ¶æ€ã€ç»„ä»¶åˆ—è¡¨ã€HMR æ—¥å¿—
- Props ç¼–è¾‘å™¨ï¼šå®æ—¶ä¿®æ”¹ç»„ä»¶å±æ€§
- æ€§èƒ½ç›‘æ§

### å‘å¸ƒæµç¨‹

#### 1) åŒ…å‘å¸ƒï¼ˆChangesets + CIï¼‰

**é€‚ç”¨èŒƒå›´**ï¼š`private: false` çš„åŒ…ï¼ˆ`@dev-to/shared`ã€`@dev-to/react-plugin`ã€`@dev-to/react-loader`ã€`create-dev-to`ï¼‰ã€‚

**åä½œæµç¨‹**ï¼š
1. å®ŒæˆåŠŸèƒ½/ä¿®å¤å¹¶è‡ªæµ‹ã€‚
2. åˆ›å»º changesetï¼š`pnpm changeset`ï¼Œé€‰æ‹©å—å½±å“åŒ…ä¸ç‰ˆæœ¬ç±»å‹ã€‚
3. æäº¤ PR å¹¶åˆå¹¶åˆ° `main`ã€‚
4. `Release Packages` å·¥ä½œæµä¼šè‡ªåŠ¨åˆ›å»º/æ›´æ–°å‘å¸ƒ PRï¼ˆæ ‡é¢˜ `chore(repo): release packages`ï¼‰ã€‚
5. å®¡æ ¸å¹¶åˆå¹¶å‘å¸ƒ PR åï¼ŒCI è‡ªåŠ¨å‘å¸ƒåˆ° npm å¹¶æ¨é€ tagsã€‚
6. å¯¹åº”å·¥ä½œæµï¼š`.github/workflows/release-packages.yml`ã€‚

**æ‰‹åŠ¨å‘å¸ƒï¼ˆä»…åœ¨ CI ä¸å¯ç”¨æ—¶ï¼‰**ï¼š
```bash
pnpm version
pnpm release
git push --follow-tags
```

#### 2) ç½‘ç«™å‘å¸ƒï¼ˆPreview -> Release PR -> Productionï¼‰

**é€‚ç”¨èŒƒå›´**ï¼š`packages/website`ï¼ˆç½‘ç«™ä¸èµ° changesetï¼‰ã€‚

**ç‰ˆæœ¬ç­–ç•¥**ï¼šåŸºäºæœ€è¿‘ä¸€æ¬¡ `website-v*` tag ä¹‹åçš„æäº¤ä¿¡æ¯ï¼š
- `feat` -> minor
- `fix`/`perf` -> patch
- `BREAKING CHANGE` æˆ– `type!` -> major

**æäº¤å»ºè®®**ï¼šä½¿ç”¨ `feat(website): ...` / `fix(website): ...` ç­‰ Conventional Commitsï¼Œç¡®ä¿ç‰ˆæœ¬è®¡ç®—å‡†ç¡®ã€‚

**åä½œæµç¨‹**ï¼š
1. æäº¤ç½‘ç«™å˜æ›´å¹¶åˆå¹¶åˆ° `main`ï¼ˆå¸¸è§„ PR æµç¨‹ï¼‰ã€‚
2. `Website Preview Deploy` è‡ªåŠ¨éƒ¨ç½²é¢„è§ˆï¼Œå¹¶åˆ›å»º/æ›´æ–° `website-release` PRï¼ˆåŒ…å«é¢„è§ˆé“¾æ¥ä¸ç‰ˆæœ¬ï¼‰ã€‚
3. å®¡æ ¸é¢„è§ˆæ•ˆæœï¼Œåˆå¹¶ `website-release` PRã€‚
4. `Website Release Deploy` è‡ªåŠ¨éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒå¹¶åˆ›å»º `website-vX` Releaseã€‚
5. å¯¹åº”å·¥ä½œæµï¼š`.github/workflows/website-preview-deploy.yml`ã€`.github/workflows/website-release-deploy.yml`ã€‚

**æç¤º**ï¼šè‹¥æ²¡æœ‰ `feat/fix/perf/BREAKING` ç±»å‹æäº¤ï¼Œä»…éƒ¨ç½² Previewï¼Œä¸ä¼šåˆ›å»ºå‘å¸ƒ PRã€‚  
**è¯¦è§**ï¼š`packages/website/DEPLOYMENT.md`ã€‚

### Commit è§„èŒƒ

æœ¬é¡¹ç›®éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/)ï¼š

```bash
# æ ¼å¼: <type>(scope): <subject>
# scope å¿…é¡»æ˜¯ä»¥ä¸‹ä¹‹ä¸€:
# - create-dev-to
# - react-loader
# - react-plugin
# - vue-loader
# - vue-plugin
# - shared
# - website
# - repo
# - deps
# - ci

# ç¤ºä¾‹:
git commit -m "feat(react-plugin): add debug panel"
git commit -m "fix(react-loader): resolve HMR event timing issue"
git commit -m "docs(repo): update README"
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. AI Agent æ™ºèƒ½ä½“å¹³å°ï¼ˆä¸»è¦åœºæ™¯ï¼‰

**åœºæ™¯æè¿°**: é›†å›¢æ„å»ºç»Ÿä¸€çš„ AI Agent æ™ºèƒ½ä½“å¹³å°ï¼Œå„ä¸šåŠ¡çº¿æˆ–ç¬¬ä¸‰æ–¹å¼€å‘è€…æä¾›æ™ºèƒ½ä½“å¡ç‰‡ï¼ˆå¦‚å®¢æœåŠ©æ‰‹ã€æ•°æ®çœ‹æ¿ã€å·¥å•å¤„ç†ç­‰ï¼‰

**å¼€å‘æ¨¡å¼**:
```tsx
// å®¹å™¨ä¸­é…ç½®åŠ è½½æœ¬åœ°å¼€å‘ä¸­çš„ç»„ä»¶
<ReactLoader
  origin="http://localhost:5173"  // å¼€å‘è€…çš„æœ¬åœ° Vite
  name="CustomerServiceCard"
  componentProps={{ agentId: 'cs-001' }}
/>
```

**ä¼˜åŠ¿**:
- âœ… å¼€å‘è€…åœ¨æœ¬åœ°å¼€å‘ï¼Œä¿®æ”¹ä»£ç åå®¹å™¨ä¸­çš„å¡ç‰‡å®æ—¶çƒ­æ›´æ–°
- âœ… å®¹å™¨å›¢é˜Ÿä¸éœ€è¦äº†è§£æ¯ä¸ªå¡ç‰‡çš„å†…éƒ¨å®ç°ç»†èŠ‚
- âœ… å„ä¸šåŠ¡çº¿ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ï¼Œäº’ä¸å½±å“
- âœ… ç”Ÿäº§ç¯å¢ƒå‡ºé—®é¢˜æ—¶ï¼Œå¯ä¸´æ—¶åŠ è½½æœ¬åœ°ç‰ˆæœ¬è°ƒè¯•

### 2. ä¼ä¸šå¾®å‰ç«¯å¹³å°

åœ¨ä¸»åº”ç”¨ä¸­åŠ¨æ€åŠ è½½å­åº”ç”¨çš„ React ç»„ä»¶ï¼Œå„å›¢é˜Ÿç‹¬ç«‹ç»´æŠ¤ï¼š

```tsx
<ReactLoader
  origin="http://localhost:3001"  // ä¸šåŠ¡çº¿ A çš„å¼€å‘æœåŠ¡å™¨
  name="UserDashboard"
  componentProps={{ userId: 123 }}
/>
```

### 3. ä½ä»£ç /æ— ä»£ç å¹³å°çš„è‡ªå®šä¹‰ç»„ä»¶

å¹³å°æä¾›åŸºç¡€èƒ½åŠ›ï¼Œå¼€å‘è€…æä¾›è‡ªå®šä¹‰ç»„ä»¶æ‰©å±•ï¼š

```tsx
// ä½ä»£ç å¹³å°åŠ è½½ç¬¬ä¸‰æ–¹å¼€å‘çš„è‡ªå®šä¹‰å›¾è¡¨ç»„ä»¶
<ReactLoader
  origin="http://localhost:5173"
  name="CustomChart"
  componentProps={{ dataSource: chartData }}
/>
```

### 4. Electron æ¡Œé¢åº”ç”¨çš„æ’ä»¶ç³»ç»Ÿ

åœ¨ Electron ä¸»çª—å£ä¸­åŠ è½½ç‹¬ç«‹å¼€å‘çš„æ’ä»¶ç»„ä»¶ï¼š

```tsx
<ReactLoader
  origin="http://localhost:5173"
  name="PluginSettingsPanel"
/>
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feat/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat(react-plugin): add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feat/amazing-feature`)
5. åˆ›å»º Pull Request

---

## ğŸ“„ License

MIT Â© [YangYongAn](https://github.com/YangYongAn)

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [npm - @dev-to/react-plugin](https://www.npmjs.com/package/@dev-to/react-plugin)
- [npm - @dev-to/react-loader](https://www.npmjs.com/package/@dev-to/react-loader)
- [npm - create-dev-to](https://www.npmjs.com/package/create-dev-to)
- [GitHub Issues](https://github.com/YangYongAn/dev-to/issues)

---

## â“ FAQ

<details>
<summary><b>Q: ä¸ºä»€ä¹ˆéœ€è¦ CORSï¼Ÿ</b></summary>

å®¿ä¸»åº”ç”¨å’Œ Vite Dev Server é€šå¸¸è¿è¡Œåœ¨ä¸åŒç«¯å£ï¼Œå±äºè·¨åŸŸè¯·æ±‚ã€‚å¿…é¡»åœ¨ Vite é…ç½®ä¸­å¯ç”¨ `server.cors: true`ã€‚

</details>

<details>
<summary><b>Q: ç”Ÿäº§ç¯å¢ƒå¦‚ä½•ä½¿ç”¨ï¼Ÿ</b></summary>

ç”Ÿäº§ç¯å¢ƒæœ‰ä¸¤ç§æ–¹å¼ï¼š
1. ä½¿ç”¨ `dev-to build`ï¼ˆç­‰ä»·äº `vite build --mode lib`ï¼‰äº§å‡ºçš„ UMD åŒ…ï¼Œé€šè¿‡ CDN æˆ–é™æ€æœåŠ¡å™¨åˆ†å‘
2. éƒ¨ç½² Vite Dev Server åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆä¸æ¨èï¼Œä»…é€‚åˆå†…éƒ¨å·¥å…·ï¼‰

</details>

<details>
<summary><b>Q: æ”¯æŒ Vue/Svelte å—ï¼Ÿ</b></summary>

å·²æ”¯æŒ React ä¸ Vueï¼ˆå¼€å‘æ€ HMRï¼‰ã€‚æ¶æ„è®¾è®¡æ˜¯æ¡†æ¶æ— å…³çš„ï¼Œå…¶ä»–æ¡†æ¶å¯é€æ­¥æ‰©å±•ã€‚

</details>

<details>
<summary><b>Q: å¦‚ä½•å¤„ç†æ ·å¼å†²çªï¼Ÿ</b></summary>

æ¨èä½¿ç”¨ CSS Modulesï¼Œæ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆç¨³å®šçš„ scoped class nameï¼Œé¿å…æ ·å¼å†²çªã€‚

</details>

<details>
<summary><b>Q: HMR ä¸å·¥ä½œæ€ä¹ˆåŠï¼Ÿ</b></summary>

æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. Vite é…ç½®ä¸­æ˜¯å¦å¯ç”¨äº† `server.cors`
2. å®¿ä¸»åº”ç”¨æ˜¯å¦æ­£ç¡®å¯¼å…¥äº† `init.js`ï¼ˆReactLoader ä¼šè‡ªåŠ¨å¤„ç†ï¼‰
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
4. è®¿é—®è°ƒè¯•é¢æ¿æŸ¥çœ‹è¯¦ç»†çŠ¶æ€

</details>

<details>
<summary><b>Q: å¦‚ä½•å°†æ„å»ºäº§ç‰©éƒ¨ç½²åˆ° CDNï¼Ÿ</b></summary>

å¦‚æœéœ€è¦å°†æ„å»ºäº§ç‰©éƒ¨ç½²åˆ° CDNï¼ˆå¦‚ OSSã€CDN ç­‰ï¼‰ï¼Œæ¨èä»¥ä¸‹ä¸‰ç§æ–¹æ¡ˆï¼š

**æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ `experimental.renderBuiltUrl`ï¼ˆæ¨èï¼‰**

è¿™ç§æ–¹å¼åªå½±å“æ„å»ºäº§ç‰©ä¸­çš„é™æ€èµ„æºè·¯å¾„ï¼Œä¸å½±å“å¼€å‘ç¯å¢ƒï¼š

```ts
export default defineConfig(({ command, mode }) => {
  const isLibBuild = command === 'build' && mode === 'lib';

  return {
    base: '/', // ä¿æŒé»˜è®¤

    // åªåœ¨æ„å»ºæ—¶ä¿®æ”¹é™æ€èµ„æºçš„ URL
    experimental: {
      renderBuiltUrl(filename, { hostType }) {
        if (isLibBuild && hostType === 'js') {
          return `https://cdn.example.com/your-app/${filename}`;
        }
        return { relative: true };
      }
    },

    plugins: [react(), devToReactPlugin('MyComponent')],
  };
});
```

**æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ `build.rollupOptions`**

é€šè¿‡ Rollup é…ç½®è‡ªå®šä¹‰èµ„æºè·¯å¾„ã€‚

**æ–¹æ¡ˆ 3ï¼šæ¡ä»¶è®¾ç½® `base`**

é€šè¿‡æ¡ä»¶åˆ¤æ–­ï¼Œåªåœ¨åº“æ„å»ºæ—¶è®¾ç½® CDN baseã€‚

æ‰€æœ‰ `/__dev_to__/` æ¡¥æ¥è·¯å¾„ä¸å— base é…ç½®å½±å“ã€‚æ’ä»¶å†…éƒ¨å·²å¤„ç†è·¯å¾„è§„èŒƒåŒ–ï¼Œæ— è®ºè®¾ç½®ä»€ä¹ˆ base å€¼ï¼Œæ¡¥æ¥è·¯å¾„åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½ä¿æŒç¨³å®šã€‚

</details>

<details>
<summary><b>Q: è®¾ç½® base åå¼€å‘ç¯å¢ƒæŠ¥é”™æ€ä¹ˆåŠï¼Ÿ</b></summary>

ä¸ç”¨æ‹…å¿ƒï¼æ‰€æœ‰ `/__dev_to__/` å¼€å¤´çš„æ¡¥æ¥è·¯å¾„ï¼ˆå¦‚ `/__dev_to__/react/contract.js`ï¼‰ä¸å— base é…ç½®å½±å“ã€‚

æ’ä»¶é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¡®ä¿è·¯å¾„ç¨³å®šï¼š
- **è™šæ‹Ÿæ¨¡å—è·¯å¾„**ï¼šé€šè¿‡ resolveId é’©å­è§„èŒƒåŒ–ï¼Œç§»é™¤å¯èƒ½çš„ base å‰ç¼€
- **HTTP ç«¯ç‚¹**ï¼šé€šè¿‡ä¸­é—´ä»¶ç›´æ¥æ‹¦æˆªåŸå§‹ URLï¼Œä¸ç»è¿‡ Vite çš„ base å¤„ç†

æ‰€ä»¥æ— è®ºä½ è®¾ç½®ä»€ä¹ˆ base å€¼ï¼Œå¼€å‘ç¯å¢ƒéƒ½èƒ½æ­£å¸¸å·¥ä½œï¼

</details>
